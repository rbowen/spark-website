<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
     Spark Release 3.4.3 | Apache Spark
    
  </title>

  

  

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
  <!-- Code highlighter CSS -->
  <link href="/css/pygments-default.css" rel="stylesheet">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="https://analytics.apache.org/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '40']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->
</head>
<body class="global">
<nav class="navbar navbar-expand-lg navbar-dark p-0 px-4" style="background: #1D6890;">
  <a class="navbar-brand" href="/">
    <img src="/images/spark-logo-rev.svg" alt="" width="141" height="72">
  </a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
          aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse col-md-12 col-lg-auto pt-4" id="navbarContent">

    <ul class="navbar-nav me-auto">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/downloads.html">Download</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="libraries" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Libraries
        </a>
        <ul class="dropdown-menu" aria-labelledby="libraries">
          <li><a class="dropdown-item" href="/sql/">SQL and DataFrames</a></li>
          <li><a class="dropdown-item" href="/spark-connect/">Spark Connect</a></li>
          <li><a class="dropdown-item" href="/streaming/">Spark Streaming</a></li>
          <li><a class="dropdown-item" href="/pandas-on-spark/">pandas on Spark</a></li>
          <li><a class="dropdown-item" href="/mllib/">MLlib (machine learning)</a></li>
          <li><a class="dropdown-item" href="/graphx/">GraphX (graph)</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="/third-party-projects.html">Third-Party Projects</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="documentation" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Documentation
        </a>
        <ul class="dropdown-menu" aria-labelledby="documentation">
          <li><a class="dropdown-item" href="/docs/latest/">Latest Release</a></li>
          <li><a class="dropdown-item" href="/documentation.html">Older Versions and Other Resources</a></li>
          <li><a class="dropdown-item" href="/faq.html">Frequently Asked Questions</a></li>
        </ul>
      </li>
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/examples.html">Examples</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="community" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community">
          <li><a class="dropdown-item" href="/community.html">Mailing Lists &amp; Resources</a></li>
          <li><a class="dropdown-item" href="/contributing.html">Contributing to Spark</a></li>
          <li><a class="dropdown-item" href="/improvement-proposals.html">Improvement Proposals (SPIP)</a>
          </li>
          <li><a class="dropdown-item" href="https://issues.apache.org/jira/browse/SPARK">Issue Tracker</a>
          </li>
          <li><a class="dropdown-item" href="/powered-by.html">Powered By</a></li>
          <li><a class="dropdown-item" href="/committers.html">Project Committers</a></li>
          <li><a class="dropdown-item" href="/history.html">Project History</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="developers" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Developers
        </a>
        <ul class="dropdown-menu" aria-labelledby="developers">
          <li><a class="dropdown-item" href="/developer-tools.html">Useful Developer Tools</a></li>
          <li><a class="dropdown-item" href="/versioning-policy.html">Versioning Policy</a></li>
          <li><a class="dropdown-item" href="/release-process.html">Release Process</a></li>
          <li><a class="dropdown-item" href="/security.html">Security</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          GitHub
        </a>
        <ul class="dropdown-menu" aria-labelledby="github">
          <li><a class="dropdown-item" href="https://github.com/apache/spark">spark</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-connect-go">spark-connect-go</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-docker">spark-docker</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-kubernetes-operator">spark-kubernetes-operator</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-website">spark-website</a></li>
        </ul>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="apacheFoundation" role="button"
           data-bs-toggle="dropdown" aria-expanded="false">
          Apache Software Foundation
        </a>
        <ul class="dropdown-menu" aria-labelledby="apacheFoundation">
          <li><a class="dropdown-item" href="https://www.apache.org/">Apache Homepage</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
          <li><a class="dropdown-item"
                 href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/security/">Security</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/events/current-event">Event</a></li>
        </ul>
      </li>
    </ul>
  </div>
</nav>

<div class="container">
  <div class="row mt-4">
    <div class="col-12 col-md-9">
      <h2>Spark Release 3.4.3</h2>


<p>Spark 3.4.3 is a maintenance release containing security and correctness fixes. This release is based on the branch-3.4 maintenance branch of Spark. We strongly recommend all 3.4 users to upgrade to this stable release.</p>

<h3 id="notable-changes">Notable changes</h3>

<ul>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45580">[SPARK-45580]</a>: Handle case where a nested subquery becomes an existence join</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46029">[SPARK-46029]</a>: Escape the single quote, _ and % for DS V2 pushdown</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46092">[SPARK-46092]</a>: Don&#8217;t push down Parquet row group filters that overflow</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46182">[SPARK-46182]</a>: Track <code class="language-plaintext highlighter-rouge">lastTaskFinishTime</code> using the exact task finished event</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46189">[SPARK-46189]</a>: Perform comparisons and arithmetic between same types in various Pandas aggregate functions to avoid interpreted mode errors</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46239">[SPARK-46239]</a>: Hide <code class="language-plaintext highlighter-rouge">Jetty</code> info</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46275">[SPARK-46275]</a>: Protobuf: Return null in permissive mode when deserialization fails</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46286">[SPARK-46286]</a>: Document <code class="language-plaintext highlighter-rouge">spark.io.compression.zstd.bufferPool.enabled</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46330">[SPARK-46330]</a>: Loading of Spark UI blocks for a long time when HybridStore enabled</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46339">[SPARK-46339]</a>: Directory with batch number name should not be treated as metadata log</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46369">[SPARK-46369]</a>: Remove <code class="language-plaintext highlighter-rouge">kill</code> link from <code class="language-plaintext highlighter-rouge">RELAUNCHING</code> drivers in <code class="language-plaintext highlighter-rouge">MasterPage</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46400">[SPARK-46400]</a>: When there are corrupted files in the local maven repo, skip this cache and try again</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46417">[SPARK-46417]</a>: Do not fail when calling hive.getTable and throwException is false</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46466">[SPARK-46466]</a>: Vectorized parquet reader should never do rebase for timestamp ntz</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46598">[SPARK-46598]</a>: OrcColumnarBatchReader should respect the memory mode when creating column vectors for the missing column</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46628">[SPARK-46628]</a>: Use SPDX short identifier in <code class="language-plaintext highlighter-rouge">license</code> name</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46700">[SPARK-46700]</a>: Count the last spilling for the shuffle disk spilling bytes metric</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46704">[SPARK-46704]</a>: Fix <code class="language-plaintext highlighter-rouge">MasterPage</code> to sort <code class="language-plaintext highlighter-rouge">Running Drivers</code> table by <code class="language-plaintext highlighter-rouge">Duration</code> column correctly</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46747">[SPARK-46747]</a>: Avoid scan in getTableExistsQuery for JDBC Dialects</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46763">[SPARK-46763]</a>: Fix assertion failure in ReplaceDeduplicateWithAggregate for duplicate attributes</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46779">[SPARK-46779]</a>: <code class="language-plaintext highlighter-rouge">InMemoryRelation</code> instances of the same cached plan should be semantically equivalent</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46786">[SPARK-46786]</a>: Fix <code class="language-plaintext highlighter-rouge">MountVolumesFeatureStep</code> to use <code class="language-plaintext highlighter-rouge">ReadWriteOncePod</code> instead of <code class="language-plaintext highlighter-rouge">ReadWriteOnce</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46794">[SPARK-46794]</a>: Remove subqueries from LogicalRDD constraints</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46801">[SPARK-46801]</a>: Do not treat exit code 5 as a test failure in Python testing script</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46817">[SPARK-46817]</a>: Fix <code class="language-plaintext highlighter-rouge">spark-daemon.sh</code> usage by adding <code class="language-plaintext highlighter-rouge">decommission</code> command</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46861">[SPARK-46861]</a>: Avoid Deadlock in DAGScheduler</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46862">[SPARK-46862]</a>: Disable CSV column pruning in the multi-line mode</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46888">[SPARK-46888]</a>: Fix <code class="language-plaintext highlighter-rouge">Master</code> to reject <code class="language-plaintext highlighter-rouge">/workers/kill/</code> requests if decommission is disabled</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46893">[SPARK-46893]</a>: Remove inline scripts from UI descriptions</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46945">[SPARK-46945]</a>: Add <code class="language-plaintext highlighter-rouge">spark.kubernetes.legacy.useReadWriteOnceAccessMode</code> for old K8s clusters</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47063">[SPARK-47063]</a>: CAST long to timestamp has different behavior for codegen vs interpreted</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47072">[SPARK-47072]</a>: Fix supported interval formats in error messages</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47085">[SPARK-47085]</a>: Reduce the complexity of toTRowSet from n^2 to n</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47125">[SPARK-47125]</a>: Return null if Univocity never triggers parsing</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47146">[SPARK-47146]</a>: Possible thread leak when doing sort merge join</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47177">[SPARK-47177]</a>: Cached SQL plan do not display final AQE plan in explain string</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47187">[SPARK-47187]</a>: Fix hive compress output config does not work</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47236">[SPARK-47236]</a>: Fix <code class="language-plaintext highlighter-rouge">deleteRecursivelyUsingJavaIO</code> to skip non-existing file input</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47305">[SPARK-47305]</a>: Fix PruneFilters to tag the isStreaming flag of LocalRelation correctly when the plan has both batch and streaming</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47318">[SPARK-47318]</a>: Adds HKDF round to AuthEngine key derivation to follow standard KEX practices</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47368">[SPARK-47368]</a>: Remove inferTimestampNTZ config check in ParquetRowConverter</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47370">[SPARK-47370]</a>: Add migration doc for TimestampNTZ type inference on Parquet files</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47385">[SPARK-47385]</a>: Fix tuple encoders with Option inputs</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47434">[SPARK-47434]</a>: Fix <code class="language-plaintext highlighter-rouge">statistics</code> link in <code class="language-plaintext highlighter-rouge">StreamingQueryPage</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47494">[SPARK-47494]</a>: Add migration doc for the behavior change of Parquet timestamp inference since Spark 3.3</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47503">[SPARK-47503]</a>: Make makeDotNode escape graph node name always</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47521">[SPARK-47521]</a>: Use <code class="language-plaintext highlighter-rouge">Utils.tryWithResource</code> during reading shuffle data from external storage</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47537">[SPARK-47537]</a>: Fix error data type mapping on MySQL Connector/J</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47646">[SPARK-47646]</a>: Make try_to_number return NULL for malformed input</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47666">[SPARK-47666]</a>: Fix NPE when reading mysql bit array as LongType</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47824">[SPARK-47824]</a>: Fix nondeterminism in pyspark.pandas.series.asof</li>
</ul>

<h3 id="dependency-changes">Dependency Changes</h3>

<p>While being a maintenance release we did still upgrade some dependencies in this release they are:</p>

<ul>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45445">[SPARK-45445]</a>: Upgrade snappy to 1.1.10.5</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47428">[SPARK-47428]</a>: Upgrade Jetty to 9.4.54.v20240208</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47844">[SPARK-47844]</a>: Update ORC to 1.8.7</li>
</ul>

<p>You can consult JIRA for the <a href="https://s.apache.org/spark-3.4.3">detailed changes</a>.</p>

<p>We would like to acknowledge all community members for contributing patches to this release.</p>



<p>
<br/>
<a href="/news/">Spark News Archive</a>
</p>

    </div>
    <div class="col-12 col-md-3">
      <div class="news" style="margin-bottom: 20px;">
        <h5>Latest News</h5>
        <ul class="list-unstyled">
          
          <li><a href="/news/spark-4.0.0-preview1.html">Preview release of Spark 4.0</a>
            <span class="small">(Jun 03, 2024)</span></li>
          
          <li><a href="/news/spark-3-4-3-released.html">Spark 3.4.3 released</a>
            <span class="small">(Apr 18, 2024)</span></li>
          
          <li><a href="/news/spark-3-5-1-released.html">Spark 3.5.1 released</a>
            <span class="small">(Feb 23, 2024)</span></li>
          
          <li><a href="/news/spark-3-3-4-released.html">Spark 3.3.4 released</a>
            <span class="small">(Dec 16, 2023)</span></li>
          
        </ul>
        <p class="small" style="text-align: right;"><a href="/news/index.html">Archive</a></p>
      </div>
      <div style="text-align:center; margin-bottom: 20px;">
        <a href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png" style="max-width: 100%;"/>
        </a>
      </div>
      <div class="hidden-xs hidden-sm">
        <a href="/downloads.html" class="btn btn-cta btn-lg d-grid" style="margin-bottom: 30px;">
          Download Spark
        </a>
        <p style="font-size: 16px; font-weight: 500; color: #555;">
          Built-in Libraries:
        </p>
        <ul class="list-none">
          <li><a href="/sql/">SQL and DataFrames</a></li>
          <li><a href="/streaming/">Spark Streaming</a></li>
          <li><a href="/mllib/">MLlib (machine learning)</a></li>
          <li><a href="/graphx/">GraphX (graph)</a></li>
        </ul>
        <a href="/third-party-projects.html">Third-Party Projects</a>
      </div>
    </div>
  </div>

  

  <footer class="small">
    <hr>
    Apache Spark, Spark, Apache, the Apache feather logo, and the Apache Spark project logo are either registered
    trademarks or trademarks of The Apache Software Foundation in the United States and other countries.
    See guidance on use of Apache Spark <a href="/trademarks.html">trademarks</a>.
    All other marks mentioned may be trademarks or registered trademarks of their respective owners.
    Copyright &copy; 2018 The Apache Software Foundation, Licensed under the
    <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="/js/lang-tabs.js"></script>
<script src="/js/downloads.js"></script>
</body>
</html>
